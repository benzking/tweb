import{E as de,h as W,D as C,p as ue,M as K,a as z,c as me,j as H,k as he,I as ve}from"./index-608b9304.js";const p=new de,q="start",V="end";let B=!1,b=W(),D=0;b.resolve();const R=console.log.bind(console.log,"[HEAVY-ANIMATION]:");function J(e,t){B||(b=W(),p.dispatchEvent(q),B=!0,C&&R("start")),++D,C&&R("attach promise, length:",D,t);const n=[t!==void 0?ue(t):void 0,e.finally(()=>{})].filter(Boolean),l=performance.now(),a=b;return Promise.race(n).then(()=>{b!==a||b.isFulfilled||(--D,C&&R("promise end, length:",D,performance.now()-l),D<=0&&ee())}),b}window.dispatchHeavyAnimationEvent=J;function ee(){b.isFulfilled||(B=!1,D=0,p.dispatchEvent(V),b.resolve(),C&&R("end"))}function xe(){ee()}function He(){return b}function Be(e,t,n){B&&e();const l=n?n.add(p):p.addEventListener.bind(p),a=n?n.removeManual.bind(n,p):p.removeEventListener.bind(p);return l(q,e),l(V,t),()=>{a(V,t),a(q,e)}}function k(e,t){if(!e.parentNode)return-1;if(t)return Array.from(e.parentNode.childNodes).indexOf(e);let n=0;for(;(e=e.previousElementSibling)!==null;)++n;return n}class ge{isEnabled(){return z.settings.liteMode.all}isAvailable(t){return!z.settings.liteMode.all&&!z.settings.liteMode[t]}}const U=new ge;K&&(K.liteMode=U);function F(e,t){return`translate3d(${e}px, ${t}px, 0)`}const Ee={callback:(e,t,n)=>{const l=t.getBoundingClientRect().width,a=[e,t];return n&&a.reverse(),a[0].style.filter="brightness(80%)",a[0].style.transform=F(-l*.25,0),a[1].style.transform=F(l,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",e.style.filter="",()=>{t.style.transform=t.style.filter=""}},animateFirst:!1},ye={callback:(e,t,n)=>{const l=t.getBoundingClientRect().width,a=[e,t];return n&&a.reverse(),a[0].style.transform=F(-l,0),a[1].style.transform=F(l,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",()=>{t.style.transform=""}},animateFirst:!1},Te={navigation:Ee,tabs:ye},we=e=>{let{content:t,type:n,transitionTime:l,onTransitionEnd:a,isHeavy:w=!0,once:m=!1,withAnimationListener:g=!0,listenerSetter:L,animateFirst:A=!1}=e;const{callback:E,animateFirst:N}=Te[n]||{};t.dataset.animation=n,N!==void 0&&(A=N);const d=new Map;let r,s=null;if(g){const o=E?"transitionend":"animationend",u=v=>{me(v),!(v.target.parentElement!==t||(d.get(v.target)?.(),v.target!==s))&&(!r&&w||(r&&(r.resolve(),r=void 0),a?.(y.prevId()),t.classList.remove("animating","backwards","disable-hover"),m&&(L?L.removeManual(t,o,u):t.removeEventListener(o,u),s=r=void 0,d.clear())))};L?L.add(t)(o,u):t.addEventListener(o,u)}function y(o,u=!0,v){v&&(s=v),o instanceof HTMLElement&&(o=k(o));const c=y.prevId();if(o===c)return!1;const i=t.children[o];if((!U.isAvailable("animations")||c===-1&&!A)&&(u=!1),!g){const h=t.dataset.timeout;h!==void 0&&clearTimeout(+h),delete t.dataset.timeout}if(!u){s?s.classList.remove("active","to","from"):i&&d.get(i)?.(),i&&(i.classList.remove("to","from"),i.classList.add("active")),t.classList.remove("animating","backwards","disable-hover"),s=i,a?.(o);return}g||(t.dataset.timeout=""+window.setTimeout(()=>{i.classList.remove("to"),s&&s.classList.remove("from"),t.classList.remove("animating","backwards","disable-hover"),delete t.dataset.timeout},l)),s&&(s.classList.remove("to"),s.classList.add("from")),t.classList.add("animating");const M=c<o;t.classList.toggle("backwards",!M);let I;if(i&&(E?I=E(i,s,M):i.classList.add("active"),i.classList.remove("from"),i.classList.add("to")),i){const h=i.dataset.transitionTimeout;h&&clearTimeout(+h),d.set(i,()=>{i.classList.remove("to"),d.delete(i)})}if(s){let h;const T=s,P=()=>{clearTimeout(h),T.classList.remove("active","from"),I?.(),d.delete(T)};i?(h=window.setTimeout(P,l+100),d.set(T,P)):(h=window.setTimeout(P,l),d.set(T,()=>{clearTimeout(h),d.delete(T)})),T.dataset.transitionTimeout=""+h,w&&(r||(r=W()),J(r,l*2))}s=i}return y.prevId=()=>s?k(s):-1,y.getFrom=()=>s,y.setFrom=o=>s=o,y},$=new Map;function be(e){O(e);const t={isCancelled:!1,deferred:W()};return $.set(e,t),t.deferred.then(()=>{te(e)===t&&$.delete(e)}),t}function te(e){return $.get(e)}function O(e){const t=te(e);t&&(t.isCancelled=!0,t.deferred.resolve())}function ne(e,t,n){return n||(n=be(t)),H(()=>{n.isCancelled||(e()?ne(e,t,n):n.deferred.resolve())}),n.deferred}function Le(e){H(()=>{e()&&Le(e)})}function Me(e){return!!e?.isConnected}const Z=250,Se=600,se=1500,pe=500;var ie=(e=>(e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Static=2]="Static",e))(ie||{});function Ae(e){if(e.margin??(e.margin=0),e.maxDistance??(e.maxDistance=se),e.axis??(e.axis="y"),(!U.isAvailable("animations")||e.forceDuration===0)&&(e.forceDirection=2),e.forceDirection===2)return e.forceDuration=0,G(e);const t=he().then(()=>G(e));return e.axis==="y"?J(t):t}function G(e){const{element:t,container:n,getNormalSize:l,getElementPosition:a,transitionFunction:w,axis:m,margin:g,position:L,forceDirection:A,maxDistance:E,forceDuration:N}=e;if(!Me(t))return O(n),Promise.resolve();const d=m==="y"?"top":"left",r=m==="y"?"bottom":"right",s=m==="y"?"height":"width",y=m==="y"?"scrollHeight":"scrollWidth",o=m==="y"?"scrollHeight":"offsetWidth",u=m==="y"?"scrollTop":"scrollLeft",v=t.getBoundingClientRect(),c=n.getBoundingClientRect?n.getBoundingClientRect():document.body.getBoundingClientRect(),i=v[d]-c[d],M=a?a({elementRect:v,containerRect:c,elementPosition:i}):i,I=t[o],h=l?l({rect:c}):c[s];let T=n[u];const P=n[y];let f;switch(L){case"start":f=M-g;break;case"end":f=v[r]-c[r]+g;break;case"nearest":case"center":if(I<h)f=M+I/2-h/2;else{if(e.fallbackToElementStartWhenCentering&&e.fallbackToElementStartWhenCentering!==t)return e.element=e.fallbackToElementStartWhenCentering,e.position="start",G(e);f=M-g}break}if(Math.abs(f-(g||0))<1)return O(n),Promise.resolve();if(m==="y"&&A===void 0&&(f>E?(T=n.scrollTop+=f-E,f=E):f<-E&&(T=n.scrollTop+=f+E,f=-E)),f<0){const S=-T;f=Math.max(f,S)}else if(f>0){const S=P-(T+h);f=Math.min(f,S)}const j=n[u]+f,X=Math.abs(f),_=N??Z+X/se*(Se-Z),oe=Date.now(),le=w??(X<pe?Pe:Ie),Q=()=>_?Math.min((Date.now()-oe)/_,1):1,Y=()=>{const S=Q(),ce=le(S),fe=f*(1-ce);return n[u]=Math.round(j-fe),S<1};if(!_||!f)return O(n),Y(),Promise.resolve();if(e.startCallback){const S=P-Math.round(j+n[m==="y"?"offsetHeight":"offsetWidth"]);e.startCallback({scrollSize:P,scrollPosition:T,distanceToEnd:S,path:f,duration:_,containerRect:c,elementRect:v,getProgress:Q})}return ne(Y,n)}function Ie(e){return 1-(1-e)**5}function Pe(e){return 1-(1-e)**3.5}function Ne(e,t){if(!e)return null;if(e.parentElement===t)return e;for(;e.parentElement;)if(e=e.parentElement,e.parentElement===t)return e;return null}function De(e,t){const n=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(n)}let ae;document.addEventListener("mousedown",e=>{ae=e.target});function ke(e){if(e.isTrusted&&e.type==="click"&&e.target!==ae)return!0}const x=ve?"mousedown":"click";function _e(e,t,n={}){const l=n.listenerSetter?n.listenerSetter.add(e):e.addEventListener.bind(e),a=n.listenerSetter?n.listenerSetter.removeManual.bind(n.listenerSetter,e):e.removeEventListener.bind(e);if(n.touchMouseDown=!0,x==="click"){const w=t;t=m=>{ke(m)||w(m)}}return l(x,t,n),()=>a(x,t,n)}function Fe(e){De(e,x)}function Ce(e,t,n,l,a=200,w,m){const g=we({content:t,type:e||t.dataset.animation==="tabs"?"tabs":"navigation",transitionTime:a,onTransitionEnd:l,listenerSetter:m});if(!e)return g;const L=new Proxy(g,{apply:(d,r,s)=>{const y=s[1]!==void 0?s[1]:!0;let o,u;s[0]instanceof HTMLElement?(o=k(s[0]),u=s[0]):(o=+s[0],u=e.querySelector(`[data-tab="${o}"]`)||e.children[o]),A(u,o,y)}}),A=async(d,r,s=!0)=>{const y=t.children[r];if(n){const c=n(r,y,s),i=c instanceof Promise?await c:c;if(i!==void 0&&!i)return}w&&w.scrollIntoViewNew({element:d.parentElement.children[r],position:"center",forceDirection:s?void 0:ie.Static,forceDuration:a,axis:"x"}),U.isAvailable("animations")||(s=!1);const o=g.prevId();if(d.classList.contains("active")||r===o)return!1;const u=s?H:c=>c(),v=e.querySelector(N.toLowerCase()+".active");v&&u(()=>{v.classList.remove("active")}),E&&o!==-1&&s&&u(()=>{const c=d.querySelector("i"),i=d.parentElement.children[o].querySelector("i");i.classList.remove("animate"),c.classList.remove("animate");const M=i.parentElement.parentElement.offsetLeft-c.parentElement.parentElement.offsetLeft,I=i.clientWidth/c.clientWidth;c.style.transform=`translate3d(${M}px, 0, 0) scale3d(${I}, 1, 1)`,H(()=>{c.classList.add("animate"),c.style.transform="none"})}),u(()=>{d.classList.add("active")}),g(r,s)},E=!e.classList.contains("no-stripe"),N=e.firstElementChild.tagName;return _e(e,d=>{let r=d.target;if(r=Ne(r,e),!r)return!1;let s;if(r.dataset.tab){if(s=+r.dataset.tab,s===-1)return!1}else s=k(r);A(r,s)},{listenerSetter:m}),L}class Re{constructor(){this.pageId=-1,this.pagesDiv=document.getElementById("auth-pages"),this.scrollableDiv=this.pagesDiv.querySelector(".scrollable"),this.selectTab=Ce(null,this.scrollableDiv.querySelector(".tabs-container"),null,()=>{this.page?.onShown&&this.page.onShown()})}setPage(t){if(t.isAuthPage){this.pagesDiv.style.display="";const n=k(t.pageEl);if(this.pageId===n)return;this.selectTab(n),this.pageId=n,this.scrollableDiv&&Ae({container:this.scrollableDiv,element:this.scrollableDiv.firstElementChild,position:"start"})}else this.pagesDiv.style.display="none",t.pageEl.style.display="",this.pageId=-1;this.page=t}}const re=new Re;K.pagesManager=re;class We{constructor(t,n,l,a,w){this.isAuthPage=n,this.onFirstMount=l,this.onMount=a,this.onShown=w,this.installed=!1,this.pageEl=document.body.querySelector("."+t)}async mount(...t){if(this.onMount){const n=this.onMount(...t);n instanceof Promise&&await n}if(!this.installed){if(this.onFirstMount)try{const n=this.onFirstMount(...t);n instanceof Promise&&await n}catch(n){console.error("PAGE MOUNT ERROR:",n)}this.installed=!0}re.setPage(this)}}export{x as C,ie as F,We as P,we as T,_e as a,Ae as b,Fe as c,Le as d,ne as e,Ne as f,He as g,ke as h,Me as i,Ce as j,O as k,U as l,xe as m,J as n,De as s,Be as u,k as w};
//# sourceMappingURL=page-f3fa5d52.js.map
