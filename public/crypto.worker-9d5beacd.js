function kt(...f){const n=f.reduce((l,c)=>l+(c.byteLength||c.length),0),o=new Uint8Array(n);let s=0;return f.forEach(l=>{o.set(l instanceof ArrayBuffer?new Uint8Array(l):l,s),s+=l.byteLength||l.length}),o}Uint8Array.prototype.concat=function(...f){return kt(this,...f)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(f){const n=o=>Promise.resolve(f()).then(o);return this.then(o=>n(()=>o),o=>n(()=>Promise.reject(o)))};var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Ie={},$e={get exports(){return Ie},set exports(f){Ie=f}};(function(f){var n=function(o){var s=1e7,l=7,c=9007199254740992,b=nt(c),E="0123456789abcdefghijklmnopqrstuvwxyz",M=typeof BigInt=="function";function A(e,r,a,u){return typeof e>"u"?A[0]:typeof r<"u"?+r==10&&!a?C(e):Ee(e,r,a,u):C(e)}function d(e,r){this.value=e,this.sign=r,this.isSmall=!1}d.prototype=Object.create(A.prototype);function m(e){this.value=e,this.sign=e<0,this.isSmall=!0}m.prototype=Object.create(A.prototype);function S(e){this.value=e}S.prototype=Object.create(A.prototype);function O(e){return-c<e&&e<c}function nt(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function ct(e){_t(e);var r=e.length;if(r<4&&dt(e,b)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*s;default:return e[0]+(e[1]+e[2]*s)*s}return e}function _t(e){for(var r=e.length;e[--r]===0;);e.length=r+1}function yt(e){for(var r=new Array(e),a=-1;++a<e;)r[a]=0;return r}function at(e){return e>0?Math.floor(e):Math.ceil(e)}function zt(e,r){var a=e.length,u=r.length,g=new Array(a),p=0,k=s,_,P;for(P=0;P<u;P++)_=e[P]+r[P]+p,p=_>=k?1:0,g[P]=_-p*k;for(;P<a;)_=e[P]+p,p=_===k?1:0,g[P++]=_-p*k;return p>0&&g.push(p),g}function xt(e,r){return e.length>=r.length?zt(e,r):zt(r,e)}function ot(e,r){var a=e.length,u=new Array(a),g=s,p,k;for(k=0;k<a;k++)p=e[k]-g+r,r=Math.floor(p/g),u[k]=p-r*g,r+=1;for(;r>0;)u[k++]=r%g,r=Math.floor(r/g);return u}d.prototype.add=function(e){var r=C(e);if(this.sign!==r.sign)return this.subtract(r.negate());var a=this.value,u=r.value;return r.isSmall?new d(ot(a,Math.abs(u)),this.sign):new d(xt(a,u),this.sign)},d.prototype.plus=d.prototype.add,m.prototype.add=function(e){var r=C(e),a=this.value;if(a<0!==r.sign)return this.subtract(r.negate());var u=r.value;if(r.isSmall){if(O(a+u))return new m(a+u);u=nt(Math.abs(u))}return new d(ot(u,Math.abs(a)),a<0)},m.prototype.plus=m.prototype.add,S.prototype.add=function(e){return new S(this.value+C(e).value)},S.prototype.plus=S.prototype.add;function At(e,r){var a=e.length,u=r.length,g=new Array(a),p=0,k=s,_,P;for(_=0;_<u;_++)P=e[_]-p-r[_],P<0?(P+=k,p=1):p=0,g[_]=P;for(_=u;_<a;_++){if(P=e[_]-p,P<0)P+=k;else{g[_++]=P;break}g[_]=P}for(;_<a;_++)g[_]=e[_];return _t(g),g}function St(e,r,a){var u;return dt(e,r)>=0?u=At(e,r):(u=At(r,e),a=!a),u=ct(u),typeof u=="number"?(a&&(u=-u),new m(u)):new d(u,a)}function Mt(e,r,a){var u=e.length,g=new Array(u),p=-r,k=s,_,P;for(_=0;_<u;_++)P=e[_]+p,p=Math.floor(P/k),P%=k,g[_]=P<0?P+k:P;return g=ct(g),typeof g=="number"?(a&&(g=-g),new m(g)):new d(g,a)}d.prototype.subtract=function(e){var r=C(e);if(this.sign!==r.sign)return this.add(r.negate());var a=this.value,u=r.value;return r.isSmall?Mt(a,Math.abs(u),this.sign):St(a,u,this.sign)},d.prototype.minus=d.prototype.subtract,m.prototype.subtract=function(e){var r=C(e),a=this.value;if(a<0!==r.sign)return this.add(r.negate());var u=r.value;return r.isSmall?new m(a-u):Mt(u,Math.abs(a),a>=0)},m.prototype.minus=m.prototype.subtract,S.prototype.subtract=function(e){return new S(this.value-C(e).value)},S.prototype.minus=S.prototype.subtract,d.prototype.negate=function(){return new d(this.value,!this.sign)},m.prototype.negate=function(){var e=this.sign,r=new m(-this.value);return r.sign=!e,r},S.prototype.negate=function(){return new S(-this.value)},d.prototype.abs=function(){return new d(this.value,!1)},m.prototype.abs=function(){return new m(Math.abs(this.value))},S.prototype.abs=function(){return new S(this.value>=0?this.value:-this.value)};function Ut(e,r){var a=e.length,u=r.length,g=a+u,p=yt(g),k=s,_,P,q,W,F;for(q=0;q<a;++q){W=e[q];for(var j=0;j<u;++j)F=r[j],_=W*F+p[q+j],P=Math.floor(_/k),p[q+j]=_-P*k,p[q+j+1]+=P}return _t(p),p}function wt(e,r){var a=e.length,u=new Array(a),g=s,p=0,k,_;for(_=0;_<a;_++)k=e[_]*r+p,p=Math.floor(k/g),u[_]=k-p*g;for(;p>0;)u[_++]=p%g,p=Math.floor(p/g);return u}function Tt(e,r){for(var a=[];r-- >0;)a.push(0);return a.concat(e)}function st(e,r){var a=Math.max(e.length,r.length);if(a<=30)return Ut(e,r);a=Math.ceil(a/2);var u=e.slice(a),g=e.slice(0,a),p=r.slice(a),k=r.slice(0,a),_=st(g,k),P=st(u,p),q=st(xt(g,u),xt(k,p)),W=xt(xt(_,Tt(At(At(q,_),P),a)),Tt(P,2*a));return _t(W),W}function Nt(e,r){return-.012*e-.012*r+15e-6*e*r>0}d.prototype.multiply=function(e){var r=C(e),a=this.value,u=r.value,g=this.sign!==r.sign,p;if(r.isSmall){if(u===0)return A[0];if(u===1)return this;if(u===-1)return this.negate();if(p=Math.abs(u),p<s)return new d(wt(a,p),g);u=nt(p)}return Nt(a.length,u.length)?new d(st(a,u),g):new d(Ut(a,u),g)},d.prototype.times=d.prototype.multiply;function Ot(e,r,a){return e<s?new d(wt(r,e),a):new d(Ut(r,nt(e)),a)}m.prototype._multiplyBySmall=function(e){return O(e.value*this.value)?new m(e.value*this.value):Ot(Math.abs(e.value),nt(Math.abs(this.value)),this.sign!==e.sign)},d.prototype._multiplyBySmall=function(e){return e.value===0?A[0]:e.value===1?this:e.value===-1?this.negate():Ot(Math.abs(e.value),this.value,this.sign!==e.sign)},m.prototype.multiply=function(e){return C(e)._multiplyBySmall(this)},m.prototype.times=m.prototype.multiply,S.prototype.multiply=function(e){return new S(this.value*C(e).value)},S.prototype.times=S.prototype.multiply;function Pt(e){var r=e.length,a=yt(r+r),u=s,g,p,k,_,P;for(k=0;k<r;k++){_=e[k],p=0-_*_;for(var q=k;q<r;q++)P=e[q],g=2*(_*P)+a[k+q]+p,p=Math.floor(g/u),a[k+q]=g-p*u;a[k+r]=p}return _t(a),a}d.prototype.square=function(){return new d(Pt(this.value),!1)},m.prototype.square=function(){var e=this.value*this.value;return O(e)?new m(e):new d(Pt(nt(Math.abs(this.value))),!1)},S.prototype.square=function(e){return new S(this.value*this.value)};function Ct(e,r){var a=e.length,u=r.length,g=s,p=yt(r.length),k=r[u-1],_=Math.ceil(g/(2*k)),P=wt(e,_),q=wt(r,_),W,F,j,ht,i,h,t;for(P.length<=a&&P.push(0),q.push(0),k=q[u-1],F=a-u;F>=0;F--){for(W=g-1,P[F+u]!==k&&(W=Math.floor((P[F+u]*g+P[F+u-1])/k)),j=0,ht=0,h=q.length,i=0;i<h;i++)j+=W*q[i],t=Math.floor(j/g),ht+=P[F+i]-(j-t*g),j=t,ht<0?(P[F+i]=ht+g,ht=-1):(P[F+i]=ht,ht=0);for(;ht!==0;){for(W-=1,j=0,i=0;i<h;i++)j+=P[F+i]-g+q[i],j<0?(P[F+i]=j+g,j=0):(P[F+i]=j,j=1);ht+=j}p[F]=W}return P=K(P,_)[0],[ct(p),ct(P)]}function et(e,r){for(var a=e.length,u=r.length,g=[],p=[],k=s,_,P,q,W,F;a;){if(p.unshift(e[--a]),_t(p),dt(p,r)<0){g.push(0);continue}P=p.length,q=p[P-1]*k+p[P-2],W=r[u-1]*k+r[u-2],P>u&&(q=(q+1)*k),_=Math.ceil(q/W);do{if(F=wt(r,_),dt(F,p)<=0)break;_--}while(_);g.push(_),p=At(p,F)}return g.reverse(),[ct(g),ct(p)]}function K(e,r){var a=e.length,u=yt(a),g=s,p,k,_,P;for(_=0,p=a-1;p>=0;--p)P=_*g+e[p],k=at(P/r),_=P-k*r,u[p]=k|0;return[u,_|0]}function tt(e,r){var a,u=C(r);if(M)return[new S(e.value/u.value),new S(e.value%u.value)];var g=e.value,p=u.value,k;if(p===0)throw new Error("Cannot divide by zero");if(e.isSmall)return u.isSmall?[new m(at(g/p)),new m(g%p)]:[A[0],e];if(u.isSmall){if(p===1)return[e,A[0]];if(p==-1)return[e.negate(),A[0]];var _=Math.abs(p);if(_<s){a=K(g,_),k=ct(a[0]);var P=a[1];return e.sign&&(P=-P),typeof k=="number"?(e.sign!==u.sign&&(k=-k),[new m(k),new m(P)]):[new d(k,e.sign!==u.sign),new m(P)]}p=nt(_)}var q=dt(g,p);if(q===-1)return[A[0],e];if(q===0)return[A[e.sign===u.sign?1:-1],A[0]];g.length+p.length<=200?a=Ct(g,p):a=et(g,p),k=a[0];var W=e.sign!==u.sign,F=a[1],j=e.sign;return typeof k=="number"?(W&&(k=-k),k=new m(k)):k=new d(k,W),typeof F=="number"?(j&&(F=-F),F=new m(F)):F=new d(F,j),[k,F]}d.prototype.divmod=function(e){var r=tt(this,e);return{quotient:r[0],remainder:r[1]}},S.prototype.divmod=m.prototype.divmod=d.prototype.divmod,d.prototype.divide=function(e){return tt(this,e)[0]},S.prototype.over=S.prototype.divide=function(e){return new S(this.value/C(e).value)},m.prototype.over=m.prototype.divide=d.prototype.over=d.prototype.divide,d.prototype.mod=function(e){return tt(this,e)[1]},S.prototype.mod=S.prototype.remainder=function(e){return new S(this.value%C(e).value)},m.prototype.remainder=m.prototype.mod=d.prototype.remainder=d.prototype.mod,d.prototype.pow=function(e){var r=C(e),a=this.value,u=r.value,g,p,k;if(u===0)return A[1];if(a===0)return A[0];if(a===1)return A[1];if(a===-1)return r.isEven()?A[1]:A[-1];if(r.sign)return A[0];if(!r.isSmall)throw new Error("The exponent "+r.toString()+" is too large.");if(this.isSmall&&O(g=Math.pow(a,u)))return new m(at(g));for(p=this,k=A[1];u&!0&&(k=k.times(p),--u),u!==0;)u/=2,p=p.square();return k},m.prototype.pow=d.prototype.pow,S.prototype.pow=function(e){var r=C(e),a=this.value,u=r.value,g=BigInt(0),p=BigInt(1),k=BigInt(2);if(u===g)return A[1];if(a===g)return A[0];if(a===p)return A[1];if(a===BigInt(-1))return r.isEven()?A[1]:A[-1];if(r.isNegative())return new S(g);for(var _=this,P=A[1];(u&p)===p&&(P=P.times(_),--u),u!==g;)u/=k,_=_.square();return P},d.prototype.modPow=function(e,r){if(e=C(e),r=C(r),r.isZero())throw new Error("Cannot take modPow with modulus 0");var a=A[1],u=this.mod(r);for(e.isNegative()&&(e=e.multiply(A[-1]),u=u.modInv(r));e.isPositive();){if(u.isZero())return A[0];e.isOdd()&&(a=a.multiply(u).mod(r)),e=e.divide(2),u=u.square().mod(r)}return a},S.prototype.modPow=m.prototype.modPow=d.prototype.modPow;function dt(e,r){if(e.length!==r.length)return e.length>r.length?1:-1;for(var a=e.length-1;a>=0;a--)if(e[a]!==r[a])return e[a]>r[a]?1:-1;return 0}d.prototype.compareAbs=function(e){var r=C(e),a=this.value,u=r.value;return r.isSmall?1:dt(a,u)},m.prototype.compareAbs=function(e){var r=C(e),a=Math.abs(this.value),u=r.value;return r.isSmall?(u=Math.abs(u),a===u?0:a>u?1:-1):-1},S.prototype.compareAbs=function(e){var r=this.value,a=C(e).value;return r=r>=0?r:-r,a=a>=0?a:-a,r===a?0:r>a?1:-1},d.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var r=C(e),a=this.value,u=r.value;return this.sign!==r.sign?r.sign?1:-1:r.isSmall?this.sign?-1:1:dt(a,u)*(this.sign?-1:1)},d.prototype.compareTo=d.prototype.compare,m.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var r=C(e),a=this.value,u=r.value;return r.isSmall?a==u?0:a>u?1:-1:a<0!==r.sign?a<0?-1:1:a<0?1:-1},m.prototype.compareTo=m.prototype.compare,S.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var r=this.value,a=C(e).value;return r===a?0:r>a?1:-1},S.prototype.compareTo=S.prototype.compare,d.prototype.equals=function(e){return this.compare(e)===0},S.prototype.eq=S.prototype.equals=m.prototype.eq=m.prototype.equals=d.prototype.eq=d.prototype.equals,d.prototype.notEquals=function(e){return this.compare(e)!==0},S.prototype.neq=S.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=d.prototype.neq=d.prototype.notEquals,d.prototype.greater=function(e){return this.compare(e)>0},S.prototype.gt=S.prototype.greater=m.prototype.gt=m.prototype.greater=d.prototype.gt=d.prototype.greater,d.prototype.lesser=function(e){return this.compare(e)<0},S.prototype.lt=S.prototype.lesser=m.prototype.lt=m.prototype.lesser=d.prototype.lt=d.prototype.lesser,d.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},S.prototype.geq=S.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=d.prototype.geq=d.prototype.greaterOrEquals,d.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},S.prototype.leq=S.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=d.prototype.leq=d.prototype.lesserOrEquals,d.prototype.isEven=function(){return(this.value[0]&1)===0},m.prototype.isEven=function(){return(this.value&1)===0},S.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},d.prototype.isOdd=function(){return(this.value[0]&1)===1},m.prototype.isOdd=function(){return(this.value&1)===1},S.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},d.prototype.isPositive=function(){return!this.sign},m.prototype.isPositive=function(){return this.value>0},S.prototype.isPositive=m.prototype.isPositive,d.prototype.isNegative=function(){return this.sign},m.prototype.isNegative=function(){return this.value<0},S.prototype.isNegative=m.prototype.isNegative,d.prototype.isUnit=function(){return!1},m.prototype.isUnit=function(){return Math.abs(this.value)===1},S.prototype.isUnit=function(){return this.abs().value===BigInt(1)},d.prototype.isZero=function(){return!1},m.prototype.isZero=function(){return this.value===0},S.prototype.isZero=function(){return this.value===BigInt(0)},d.prototype.isDivisibleBy=function(e){var r=C(e);return r.isZero()?!1:r.isUnit()?!0:r.compareAbs(2)===0?this.isEven():this.mod(r).isZero()},S.prototype.isDivisibleBy=m.prototype.isDivisibleBy=d.prototype.isDivisibleBy;function ft(e){var r=e.abs();if(r.isUnit())return!1;if(r.equals(2)||r.equals(3)||r.equals(5))return!0;if(r.isEven()||r.isDivisibleBy(3)||r.isDivisibleBy(5))return!1;if(r.lesser(49))return!0}function Ht(e,r){for(var a=e.prev(),u=a,g=0,p,k,_;u.isEven();)u=u.divide(2),g++;t:for(k=0;k<r.length;k++)if(!e.lesser(r[k])&&(_=n(r[k]).modPow(u,e),!(_.isUnit()||_.equals(a)))){for(p=g-1;p!=0;p--){if(_=_.square().mod(e),_.isUnit())return!1;if(_.equals(a))continue t}return!1}return!0}d.prototype.isPrime=function(e){var r=ft(this);if(r!==o)return r;var a=this.abs(),u=a.bitLength();if(u<=64)return Ht(a,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var g=Math.log(2)*u.toJSNumber(),p=Math.ceil(e===!0?2*Math.pow(g,2):g),k=[],_=0;_<p;_++)k.push(n(_+2));return Ht(a,k)},S.prototype.isPrime=m.prototype.isPrime=d.prototype.isPrime,d.prototype.isProbablePrime=function(e,r){var a=ft(this);if(a!==o)return a;for(var u=this.abs(),g=e===o?5:e,p=[],k=0;k<g;k++)p.push(n.randBetween(2,u.minus(2),r));return Ht(u,p)},S.prototype.isProbablePrime=m.prototype.isProbablePrime=d.prototype.isProbablePrime,d.prototype.modInv=function(e){for(var r=n.zero,a=n.one,u=C(e),g=this.abs(),p,k,_;!g.isZero();)p=u.divide(g),k=r,_=u,r=a,u=g,a=k.subtract(p.multiply(a)),g=_.subtract(p.multiply(g));if(!u.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return r.compare(0)===-1&&(r=r.add(e)),this.isNegative()?r.negate():r},S.prototype.modInv=m.prototype.modInv=d.prototype.modInv,d.prototype.next=function(){var e=this.value;return this.sign?Mt(e,1,this.sign):new d(ot(e,1),this.sign)},m.prototype.next=function(){var e=this.value;return e+1<c?new m(e+1):new d(b,!1)},S.prototype.next=function(){return new S(this.value+BigInt(1))},d.prototype.prev=function(){var e=this.value;return this.sign?new d(ot(e,1),!0):Mt(e,1,this.sign)},m.prototype.prev=function(){var e=this.value;return e-1>-c?new m(e-1):new d(b,!0)},S.prototype.prev=function(){return new S(this.value-BigInt(1))};for(var mt=[1];2*mt[mt.length-1]<=s;)mt.push(2*mt[mt.length-1]);var Lt=mt.length,Et=mt[Lt-1];function Wt(e){return Math.abs(e)<=s}d.prototype.shiftLeft=function(e){var r=C(e).toJSNumber();if(!Wt(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftRight(-r);var a=this;if(a.isZero())return a;for(;r>=Lt;)a=a.multiply(Et),r-=Lt-1;return a.multiply(mt[r])},S.prototype.shiftLeft=m.prototype.shiftLeft=d.prototype.shiftLeft,d.prototype.shiftRight=function(e){var r,a=C(e).toJSNumber();if(!Wt(a))throw new Error(String(a)+" is too large for shifting.");if(a<0)return this.shiftLeft(-a);for(var u=this;a>=Lt;){if(u.isZero()||u.isNegative()&&u.isUnit())return u;r=tt(u,Et),u=r[1].isNegative()?r[0].prev():r[0],a-=Lt-1}return r=tt(u,mt[a]),r[1].isNegative()?r[0].prev():r[0]},S.prototype.shiftRight=m.prototype.shiftRight=d.prototype.shiftRight;function qt(e,r,a){r=C(r);for(var u=e.isNegative(),g=r.isNegative(),p=u?e.not():e,k=g?r.not():r,_=0,P=0,q=null,W=null,F=[];!p.isZero()||!k.isZero();)q=tt(p,Et),_=q[1].toJSNumber(),u&&(_=Et-1-_),W=tt(k,Et),P=W[1].toJSNumber(),g&&(P=Et-1-P),p=q[0],k=W[0],F.push(a(_,P));for(var j=a(u?1:0,g?1:0)!==0?n(-1):n(0),ht=F.length-1;ht>=0;ht-=1)j=j.multiply(Et).add(n(F[ht]));return j}d.prototype.not=function(){return this.negate().prev()},S.prototype.not=m.prototype.not=d.prototype.not,d.prototype.and=function(e){return qt(this,e,function(r,a){return r&a})},S.prototype.and=m.prototype.and=d.prototype.and,d.prototype.or=function(e){return qt(this,e,function(r,a){return r|a})},S.prototype.or=m.prototype.or=d.prototype.or,d.prototype.xor=function(e){return qt(this,e,function(r,a){return r^a})},S.prototype.xor=m.prototype.xor=d.prototype.xor;var Gt=1<<30,Se=(s&-s)*(s&-s)|Gt;function Zt(e){var r=e.value,a=typeof r=="number"?r|Gt:typeof r=="bigint"?r|BigInt(Gt):r[0]+r[1]*s|Se;return a&-a}function bt(e,r){if(r.compareTo(e)<=0){var a=bt(e,r.square(r)),u=a.p,g=a.e,p=u.multiply(r);return p.compareTo(e)<=0?{p,e:g*2+1}:{p:u,e:g*2}}return{p:n(1),e:0}}d.prototype.bitLength=function(){var e=this;return e.compareTo(n(0))<0&&(e=e.negate().subtract(n(1))),e.compareTo(n(0))===0?n(0):n(bt(e,n(2)).e).add(n(1))},S.prototype.bitLength=m.prototype.bitLength=d.prototype.bitLength;function ae(e,r){return e=C(e),r=C(r),e.greater(r)?e:r}function Qt(e,r){return e=C(e),r=C(r),e.lesser(r)?e:r}function fe(e,r){if(e=C(e).abs(),r=C(r).abs(),e.equals(r))return e;if(e.isZero())return r;if(r.isZero())return e;for(var a=A[1],u,g;e.isEven()&&r.isEven();)u=Qt(Zt(e),Zt(r)),e=e.divide(u),r=r.divide(u),a=a.multiply(u);for(;e.isEven();)e=e.divide(Zt(e));do{for(;r.isEven();)r=r.divide(Zt(r));e.greater(r)&&(g=r,r=e,e=g),r=r.subtract(e)}while(!r.isZero());return a.isUnit()?e:e.multiply(a)}function le(e,r){return e=C(e).abs(),r=C(r).abs(),e.divide(fe(e,r)).multiply(r)}function Dt(e,r,a){e=C(e),r=C(r);var u=a||Math.random,g=Qt(e,r),p=ae(e,r),k=p.subtract(g).add(1);if(k.isSmall)return g.add(Math.floor(u()*k));for(var _=Bt(k,s).value,P=[],q=!0,W=0;W<_.length;W++){var F=q?_[W]+(W+1<_.length?_[W+1]/s:0):s,j=at(u()*F);P.push(j),j<_[W]&&(q=!1)}return g.add(A.fromArray(P,s,!1))}var Ee=function(e,r,a,u){a=a||E,e=String(e),u||(e=e.toLowerCase(),a=a.toLowerCase());var g=e.length,p,k=Math.abs(r),_={};for(p=0;p<a.length;p++)_[a[p]]=p;for(p=0;p<g;p++){var P=e[p];if(P!=="-"&&P in _&&_[P]>=k){if(P==="1"&&k===1)continue;throw new Error(P+" is not a valid digit in base "+r+".")}}r=C(r);var q=[],W=e[0]==="-";for(p=W?1:0;p<e.length;p++){var P=e[p];if(P in _)q.push(C(_[P]));else if(P==="<"){var F=p;do p++;while(e[p]!==">"&&p<e.length);q.push(C(e.slice(F+1,p)))}else throw new Error(P+" is not a valid character")}return ue(q,r,W)};function ue(e,r,a){var u=A[0],g=A[1],p;for(p=e.length-1;p>=0;p--)u=u.add(e[p].times(g)),g=g.times(r);return a?u.negate():u}function xe(e,r){return r=r||E,e<r.length?r[e]:"<"+e+">"}function Bt(e,r){if(r=n(r),r.isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(r.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var a=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return a.unshift([1]),{value:[].concat.apply([],a),isNegative:!1}}var u=!1;if(e.isNegative()&&r.isPositive()&&(u=!0,e=e.abs()),r.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:u};for(var g=[],p=e,k;p.isNegative()||p.compareAbs(r)>=0;){k=p.divmod(r),p=k.quotient;var _=k.remainder;_.isNegative()&&(_=r.minus(_).abs(),p=p.next()),g.push(_.toJSNumber())}return g.push(p.toJSNumber()),{value:g.reverse(),isNegative:u}}function ce(e,r,a){var u=Bt(e,r);return(u.isNegative?"-":"")+u.value.map(function(g){return xe(g,a)}).join("")}d.prototype.toArray=function(e){return Bt(this,e)},m.prototype.toArray=function(e){return Bt(this,e)},S.prototype.toArray=function(e){return Bt(this,e)},d.prototype.toString=function(e,r){if(e===o&&(e=10),e!==10)return ce(this,e,r);for(var a=this.value,u=a.length,g=String(a[--u]),p="0000000",k;--u>=0;)k=String(a[u]),g+=p.slice(k.length)+k;var _=this.sign?"-":"";return _+g},m.prototype.toString=function(e,r){return e===o&&(e=10),e!=10?ce(this,e,r):String(this.value)},S.prototype.toString=m.prototype.toString,S.prototype.toJSON=d.prototype.toJSON=m.prototype.toJSON=function(){return this.toString()},d.prototype.valueOf=function(){return parseInt(this.toString(),10)},d.prototype.toJSNumber=d.prototype.valueOf,m.prototype.valueOf=function(){return this.value},m.prototype.toJSNumber=m.prototype.valueOf,S.prototype.valueOf=S.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function he(e){if(O(+e)){var r=+e;if(r===at(r))return M?new S(BigInt(r)):new m(r);throw new Error("Invalid integer: "+e)}var a=e[0]==="-";a&&(e=e.slice(1));var u=e.split(/e/i);if(u.length>2)throw new Error("Invalid integer: "+u.join("e"));if(u.length===2){var g=u[1];if(g[0]==="+"&&(g=g.slice(1)),g=+g,g!==at(g)||!O(g))throw new Error("Invalid integer: "+g+" is not a valid exponent.");var p=u[0],k=p.indexOf(".");if(k>=0&&(g-=p.length-k-1,p=p.slice(0,k)+p.slice(k+1)),g<0)throw new Error("Cannot include negative exponent part for integers");p+=new Array(g+1).join("0"),e=p}var _=/^([0-9][0-9]*)$/.test(e);if(!_)throw new Error("Invalid integer: "+e);if(M)return new S(BigInt(a?"-"+e:e));for(var P=[],q=e.length,W=l,F=q-W;q>0;)P.push(+e.slice(F,q)),F-=W,F<0&&(F=0),q-=W;return _t(P),new d(P,a)}function pe(e){if(M)return new S(BigInt(e));if(O(e)){if(e!==at(e))throw new Error(e+" is not an integer.");return new m(e)}return he(e.toString())}function C(e){return typeof e=="number"?pe(e):typeof e=="string"?he(e):typeof e=="bigint"?new S(e):e}for(var It=0;It<1e3;It++)A[It]=C(It),It>0&&(A[-It]=C(-It));return A.one=A[1],A.zero=A[0],A.minusOne=A[-1],A.max=ae,A.min=Qt,A.gcd=fe,A.lcm=le,A.isInstance=function(e){return e instanceof d||e instanceof m||e instanceof S},A.randBetween=Dt,A.fromArray=function(e,r,a){return ue(e.map(C),C(r||10),a)},A}();f.hasOwnProperty("exports")&&(f.exports=n)})($e);var Y=Ie;Y(Number.MAX_SAFE_INTEGER);const Fe=Y(Y[2]).pow(64),tr=Fe.divide(Y[2]);function vt(f,n=256){return Y.fromArray(f instanceof Uint8Array?[...f]:f,n)}function Rt(f){return new Uint8Array(f.toArray(256).value)}function er(f){return f.greater(tr)?f.minus(Fe):f}function Ke(f,n,o){const s=vt(f),l=vt(n),c=vt(o),b=s.modPow(l,c);return Rt(b)}var be={},rr={get exports(){return be},set exports(f){be=f}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */(function(f,n){(function(o,s){s(n)})(Ye,function(o){var s=(i,h,t,x)=>{let T=65535&i|0,w=i>>>16&65535|0,U=0;for(;t!==0;){U=t>2e3?2e3:t,t-=U;do T=T+h[x++]|0,w=w+T|0;while(--U);T%=65521,w%=65521}return T|w<<16|0};const l=new Uint32Array((()=>{let i,h=[];for(var t=0;t<256;t++){i=t;for(var x=0;x<8;x++)i=1&i?3988292384^i>>>1:i>>>1;h[t]=i}return h})());var c=(i,h,t,x)=>{const T=l,w=x+t;i^=-1;for(let U=x;U<w;U++)i=i>>>8^T[255&(i^h[U])];return-1^i};const b=16209;var E=function(i,h){let t,x,T,w,U,B,V,v,y,lt,Z,I,ut,X,N,$,H,R,J,rt,L,Q,z,D;const G=i.state;t=i.next_in,z=i.input,x=t+(i.avail_in-5),T=i.next_out,D=i.output,w=T-(h-i.avail_out),U=T+(i.avail_out-257),B=G.dmax,V=G.wsize,v=G.whave,y=G.wnext,lt=G.window,Z=G.hold,I=G.bits,ut=G.lencode,X=G.distcode,N=(1<<G.lenbits)-1,$=(1<<G.distbits)-1;t:do{I<15&&(Z+=z[t++]<<I,I+=8,Z+=z[t++]<<I,I+=8),H=ut[Z&N];e:for(;;){if(R=H>>>24,Z>>>=R,I-=R,R=H>>>16&255,R===0)D[T++]=65535&H;else{if(!(16&R)){if(!(64&R)){H=ut[(65535&H)+(Z&(1<<R)-1)];continue e}if(32&R){G.mode=16191;break t}i.msg="invalid literal/length code",G.mode=b;break t}J=65535&H,R&=15,R&&(I<R&&(Z+=z[t++]<<I,I+=8),J+=Z&(1<<R)-1,Z>>>=R,I-=R),I<15&&(Z+=z[t++]<<I,I+=8,Z+=z[t++]<<I,I+=8),H=X[Z&$];r:for(;;){if(R=H>>>24,Z>>>=R,I-=R,R=H>>>16&255,!(16&R)){if(!(64&R)){H=X[(65535&H)+(Z&(1<<R)-1)];continue r}i.msg="invalid distance code",G.mode=b;break t}if(rt=65535&H,R&=15,I<R&&(Z+=z[t++]<<I,I+=8,I<R&&(Z+=z[t++]<<I,I+=8)),rt+=Z&(1<<R)-1,rt>B){i.msg="invalid distance too far back",G.mode=b;break t}if(Z>>>=R,I-=R,R=T-w,rt>R){if(R=rt-R,R>v&&G.sane){i.msg="invalid distance too far back",G.mode=b;break t}if(L=0,Q=lt,y===0){if(L+=V-R,R<J){J-=R;do D[T++]=lt[L++];while(--R);L=T-rt,Q=D}}else if(y<R){if(L+=V+y-R,R-=y,R<J){J-=R;do D[T++]=lt[L++];while(--R);if(L=0,y<J){R=y,J-=R;do D[T++]=lt[L++];while(--R);L=T-rt,Q=D}}}else if(L+=y-R,R<J){J-=R;do D[T++]=lt[L++];while(--R);L=T-rt,Q=D}for(;J>2;)D[T++]=Q[L++],D[T++]=Q[L++],D[T++]=Q[L++],J-=3;J&&(D[T++]=Q[L++],J>1&&(D[T++]=Q[L++]))}else{L=T-rt;do D[T++]=D[L++],D[T++]=D[L++],D[T++]=D[L++],J-=3;while(J>2);J&&(D[T++]=D[L++],J>1&&(D[T++]=D[L++]))}break}}break}}while(t<x&&T<U);J=I>>3,t-=J,I-=J<<3,Z&=(1<<I)-1,i.next_in=t,i.next_out=T,i.avail_in=t<x?x-t+5:5-(t-x),i.avail_out=T<U?U-T+257:257-(T-U),G.hold=Z,G.bits=I};const M=15,A=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),d=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),m=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),S=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var O=(i,h,t,x,T,w,U,B)=>{const V=B.bits;let v,y,lt,Z,I,ut,X=0,N=0,$=0,H=0,R=0,J=0,rt=0,L=0,Q=0,z=0,D=null;const G=new Uint16Array(16),pt=new Uint16Array(16);let $t,de,ge,ve=null;for(X=0;X<=M;X++)G[X]=0;for(N=0;N<x;N++)G[h[t+N]]++;for(R=V,H=M;H>=1&&G[H]===0;H--);if(R>H&&(R=H),H===0)return T[w++]=20971520,T[w++]=20971520,B.bits=1,0;for($=1;$<H&&G[$]===0;$++);for(R<$&&(R=$),L=1,X=1;X<=M;X++)if(L<<=1,L-=G[X],L<0)return-1;if(L>0&&(i===0||H!==1))return-1;for(pt[1]=0,X=1;X<M;X++)pt[X+1]=pt[X]+G[X];for(N=0;N<x;N++)h[t+N]!==0&&(U[pt[h[t+N]]++]=N);if(i===0?(D=ve=U,ut=20):i===1?(D=A,ve=d,ut=257):(D=m,ve=S,ut=0),z=0,N=0,X=$,I=w,J=R,rt=0,lt=-1,Q=1<<R,Z=Q-1,i===1&&Q>852||i===2&&Q>592)return 1;for(;;){$t=X-rt,U[N]+1<ut?(de=0,ge=U[N]):U[N]>=ut?(de=ve[U[N]-ut],ge=D[U[N]-ut]):(de=96,ge=0),v=1<<X-rt,y=1<<J,$=y;do y-=v,T[I+(z>>rt)+y]=$t<<24|de<<16|ge|0;while(y!==0);for(v=1<<X-1;z&v;)v>>=1;if(v!==0?(z&=v-1,z+=v):z=0,N++,--G[X]==0){if(X===H)break;X=h[t+U[N]]}if(X>R&&(z&Z)!==lt){for(rt===0&&(rt=R),I+=$,J=X-rt,L=1<<J;J+rt<H&&(L-=G[J+rt],!(L<=0));)J++,L<<=1;if(Q+=1<<J,i===1&&Q>852||i===2&&Q>592)return 1;lt=z&Z,T[lt]=R<<24|J<<16|I-w|0}}return z!==0&&(T[I+z]=X-rt<<24|64<<16|0),B.bits=R,0},nt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{Z_FINISH:ct,Z_BLOCK:_t,Z_TREES:yt,Z_OK:at,Z_STREAM_END:zt,Z_NEED_DICT:xt,Z_STREAM_ERROR:ot,Z_DATA_ERROR:At,Z_MEM_ERROR:St,Z_BUF_ERROR:Mt,Z_DEFLATED:Ut}=nt,wt=16180,Tt=16190,st=16191,Nt=16192,Ot=16194,Pt=16199,Ct=16200,et=16206,K=16209,tt=i=>(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24);function dt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ft=i=>{if(!i)return 1;const h=i.state;return!h||h.strm!==i||h.mode<wt||h.mode>16211?1:0},Ht=i=>{if(ft(i))return ot;const h=i.state;return i.total_in=i.total_out=h.total=0,i.msg="",h.wrap&&(i.adler=1&h.wrap),h.mode=wt,h.last=0,h.havedict=0,h.flags=-1,h.dmax=32768,h.head=null,h.hold=0,h.bits=0,h.lencode=h.lendyn=new Int32Array(852),h.distcode=h.distdyn=new Int32Array(592),h.sane=1,h.back=-1,at},mt=i=>{if(ft(i))return ot;const h=i.state;return h.wsize=0,h.whave=0,h.wnext=0,Ht(i)},Lt=(i,h)=>{let t;if(ft(i))return ot;const x=i.state;return h<0?(t=0,h=-h):(t=5+(h>>4),h<48&&(h&=15)),h&&(h<8||h>15)?ot:(x.window!==null&&x.wbits!==h&&(x.window=null),x.wrap=t,x.wbits=h,mt(i))},Et=(i,h)=>{if(!i)return ot;const t=new dt;i.state=t,t.strm=i,t.window=null,t.mode=wt;const x=Lt(i,h);return x!==at&&(i.state=null),x};let Wt,qt,Gt=!0;const Se=i=>{if(Gt){Wt=new Int32Array(512),qt=new Int32Array(32);let h=0;for(;h<144;)i.lens[h++]=8;for(;h<256;)i.lens[h++]=9;for(;h<280;)i.lens[h++]=7;for(;h<288;)i.lens[h++]=8;for(O(1,i.lens,0,288,Wt,0,i.work,{bits:9}),h=0;h<32;)i.lens[h++]=5;O(2,i.lens,0,32,qt,0,i.work,{bits:5}),Gt=!1}i.lencode=Wt,i.lenbits=9,i.distcode=qt,i.distbits=5},Zt=(i,h,t,x)=>{let T;const w=i.state;return w.window===null&&(w.wsize=1<<w.wbits,w.wnext=0,w.whave=0,w.window=new Uint8Array(w.wsize)),x>=w.wsize?(w.window.set(h.subarray(t-w.wsize,t),0),w.wnext=0,w.whave=w.wsize):(T=w.wsize-w.wnext,T>x&&(T=x),w.window.set(h.subarray(t-x,t-x+T),w.wnext),(x-=T)?(w.window.set(h.subarray(t-x,t),0),w.wnext=x,w.whave=w.wsize):(w.wnext+=T,w.wnext===w.wsize&&(w.wnext=0),w.whave<w.wsize&&(w.whave+=T))),0};var bt={inflateReset:mt,inflateReset2:Lt,inflateResetKeep:Ht,inflateInit:i=>Et(i,15),inflateInit2:Et,inflate:(i,h)=>{let t,x,T,w,U,B,V,v,y,lt,Z,I,ut,X,N,$,H,R,J,rt,L,Q,z=0;const D=new Uint8Array(4);let G,pt;const $t=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ft(i)||!i.output||!i.input&&i.avail_in!==0)return ot;t=i.state,t.mode===st&&(t.mode=Nt),U=i.next_out,T=i.output,V=i.avail_out,w=i.next_in,x=i.input,B=i.avail_in,v=t.hold,y=t.bits,lt=B,Z=V,Q=at;t:for(;;)switch(t.mode){case wt:if(t.wrap===0){t.mode=Nt;break}for(;y<16;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(2&t.wrap&&v===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=255&v,D[1]=v>>>8&255,t.check=c(t.check,D,2,0),v=0,y=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&v)<<8)+(v>>8))%31){i.msg="incorrect header check",t.mode=K;break}if((15&v)!==Ut){i.msg="unknown compression method",t.mode=K;break}if(v>>>=4,y-=4,L=8+(15&v),t.wbits===0&&(t.wbits=L),L>15||L>t.wbits){i.msg="invalid window size",t.mode=K;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=512&v?16189:st,v=0,y=0;break;case 16181:for(;y<16;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(t.flags=v,(255&t.flags)!==Ut){i.msg="unknown compression method",t.mode=K;break}if(57344&t.flags){i.msg="unknown header flags set",t.mode=K;break}t.head&&(t.head.text=v>>8&1),512&t.flags&&4&t.wrap&&(D[0]=255&v,D[1]=v>>>8&255,t.check=c(t.check,D,2,0)),v=0,y=0,t.mode=16182;case 16182:for(;y<32;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.head&&(t.head.time=v),512&t.flags&&4&t.wrap&&(D[0]=255&v,D[1]=v>>>8&255,D[2]=v>>>16&255,D[3]=v>>>24&255,t.check=c(t.check,D,4,0)),v=0,y=0,t.mode=16183;case 16183:for(;y<16;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.head&&(t.head.xflags=255&v,t.head.os=v>>8),512&t.flags&&4&t.wrap&&(D[0]=255&v,D[1]=v>>>8&255,t.check=c(t.check,D,2,0)),v=0,y=0,t.mode=16184;case 16184:if(1024&t.flags){for(;y<16;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.length=v,t.head&&(t.head.extra_len=v),512&t.flags&&4&t.wrap&&(D[0]=255&v,D[1]=v>>>8&255,t.check=c(t.check,D,2,0)),v=0,y=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(I=t.length,I>B&&(I=B),I&&(t.head&&(L=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(x.subarray(w,w+I),L)),512&t.flags&&4&t.wrap&&(t.check=c(t.check,x,I,w)),B-=I,w+=I,t.length-=I),t.length))break t;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(B===0)break t;I=0;do L=x[w+I++],t.head&&L&&t.length<65536&&(t.head.name+=String.fromCharCode(L));while(L&&I<B);if(512&t.flags&&4&t.wrap&&(t.check=c(t.check,x,I,w)),B-=I,w+=I,L)break t}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(B===0)break t;I=0;do L=x[w+I++],t.head&&L&&t.length<65536&&(t.head.comment+=String.fromCharCode(L));while(L&&I<B);if(512&t.flags&&4&t.wrap&&(t.check=c(t.check,x,I,w)),B-=I,w+=I,L)break t}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;y<16;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(4&t.wrap&&v!==(65535&t.check)){i.msg="header crc mismatch",t.mode=K;break}v=0,y=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=st;break;case 16189:for(;y<32;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}i.adler=t.check=tt(v),v=0,y=0,t.mode=Tt;case Tt:if(t.havedict===0)return i.next_out=U,i.avail_out=V,i.next_in=w,i.avail_in=B,t.hold=v,t.bits=y,xt;i.adler=t.check=1,t.mode=st;case st:if(h===_t||h===yt)break t;case Nt:if(t.last){v>>>=7&y,y-=7&y,t.mode=et;break}for(;y<3;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}switch(t.last=1&v,v>>>=1,y-=1,3&v){case 0:t.mode=16193;break;case 1:if(Se(t),t.mode=Pt,h===yt){v>>>=2,y-=2;break t}break;case 2:t.mode=16196;break;case 3:i.msg="invalid block type",t.mode=K}v>>>=2,y-=2;break;case 16193:for(v>>>=7&y,y-=7&y;y<32;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if((65535&v)!=(v>>>16^65535)){i.msg="invalid stored block lengths",t.mode=K;break}if(t.length=65535&v,v=0,y=0,t.mode=Ot,h===yt)break t;case Ot:t.mode=16195;case 16195:if(I=t.length,I){if(I>B&&(I=B),I>V&&(I=V),I===0)break t;T.set(x.subarray(w,w+I),U),B-=I,w+=I,V-=I,U+=I,t.length-=I;break}t.mode=st;break;case 16196:for(;y<14;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(t.nlen=257+(31&v),v>>>=5,y-=5,t.ndist=1+(31&v),v>>>=5,y-=5,t.ncode=4+(15&v),v>>>=4,y-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=K;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;y<3;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.lens[$t[t.have++]]=7&v,v>>>=3,y-=3}for(;t.have<19;)t.lens[$t[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,G={bits:t.lenbits},Q=O(0,t.lens,0,19,t.lencode,0,t.work,G),t.lenbits=G.bits,Q){i.msg="invalid code lengths set",t.mode=K;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;z=t.lencode[v&(1<<t.lenbits)-1],N=z>>>24,$=z>>>16&255,H=65535&z,!(N<=y);){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(H<16)v>>>=N,y-=N,t.lens[t.have++]=H;else{if(H===16){for(pt=N+2;y<pt;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(v>>>=N,y-=N,t.have===0){i.msg="invalid bit length repeat",t.mode=K;break}L=t.lens[t.have-1],I=3+(3&v),v>>>=2,y-=2}else if(H===17){for(pt=N+3;y<pt;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}v>>>=N,y-=N,L=0,I=3+(7&v),v>>>=3,y-=3}else{for(pt=N+7;y<pt;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}v>>>=N,y-=N,L=0,I=11+(127&v),v>>>=7,y-=7}if(t.have+I>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=K;break}for(;I--;)t.lens[t.have++]=L}}if(t.mode===K)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=K;break}if(t.lenbits=9,G={bits:t.lenbits},Q=O(1,t.lens,0,t.nlen,t.lencode,0,t.work,G),t.lenbits=G.bits,Q){i.msg="invalid literal/lengths set",t.mode=K;break}if(t.distbits=6,t.distcode=t.distdyn,G={bits:t.distbits},Q=O(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,G),t.distbits=G.bits,Q){i.msg="invalid distances set",t.mode=K;break}if(t.mode=Pt,h===yt)break t;case Pt:t.mode=Ct;case Ct:if(B>=6&&V>=258){i.next_out=U,i.avail_out=V,i.next_in=w,i.avail_in=B,t.hold=v,t.bits=y,E(i,Z),U=i.next_out,T=i.output,V=i.avail_out,w=i.next_in,x=i.input,B=i.avail_in,v=t.hold,y=t.bits,t.mode===st&&(t.back=-1);break}for(t.back=0;z=t.lencode[v&(1<<t.lenbits)-1],N=z>>>24,$=z>>>16&255,H=65535&z,!(N<=y);){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if($&&!(240&$)){for(R=N,J=$,rt=H;z=t.lencode[rt+((v&(1<<R+J)-1)>>R)],N=z>>>24,$=z>>>16&255,H=65535&z,!(R+N<=y);){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}v>>>=R,y-=R,t.back+=R}if(v>>>=N,y-=N,t.back+=N,t.length=H,$===0){t.mode=16205;break}if(32&$){t.back=-1,t.mode=st;break}if(64&$){i.msg="invalid literal/length code",t.mode=K;break}t.extra=15&$,t.mode=16201;case 16201:if(t.extra){for(pt=t.extra;y<pt;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.length+=v&(1<<t.extra)-1,v>>>=t.extra,y-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;z=t.distcode[v&(1<<t.distbits)-1],N=z>>>24,$=z>>>16&255,H=65535&z,!(N<=y);){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(!(240&$)){for(R=N,J=$,rt=H;z=t.distcode[rt+((v&(1<<R+J)-1)>>R)],N=z>>>24,$=z>>>16&255,H=65535&z,!(R+N<=y);){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}v>>>=R,y-=R,t.back+=R}if(v>>>=N,y-=N,t.back+=N,64&$){i.msg="invalid distance code",t.mode=K;break}t.offset=H,t.extra=15&$,t.mode=16203;case 16203:if(t.extra){for(pt=t.extra;y<pt;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}t.offset+=v&(1<<t.extra)-1,v>>>=t.extra,y-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=K;break}t.mode=16204;case 16204:if(V===0)break t;if(I=Z-V,t.offset>I){if(I=t.offset-I,I>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=K;break}I>t.wnext?(I-=t.wnext,ut=t.wsize-I):ut=t.wnext-I,I>t.length&&(I=t.length),X=t.window}else X=T,ut=U-t.offset,I=t.length;I>V&&(I=V),V-=I,t.length-=I;do T[U++]=X[ut++];while(--I);t.length===0&&(t.mode=Ct);break;case 16205:if(V===0)break t;T[U++]=t.length,V--,t.mode=Ct;break;case et:if(t.wrap){for(;y<32;){if(B===0)break t;B--,v|=x[w++]<<y,y+=8}if(Z-=V,i.total_out+=Z,t.total+=Z,4&t.wrap&&Z&&(i.adler=t.check=t.flags?c(t.check,T,Z,U-Z):s(t.check,T,Z,U-Z)),Z=V,4&t.wrap&&(t.flags?v:tt(v))!==t.check){i.msg="incorrect data check",t.mode=K;break}v=0,y=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;y<32;){if(B===0)break t;B--,v+=x[w++]<<y,y+=8}if(4&t.wrap&&v!==(4294967295&t.total)){i.msg="incorrect length check",t.mode=K;break}v=0,y=0}t.mode=16208;case 16208:Q=zt;break t;case K:Q=At;break t;case 16210:return St;default:return ot}return i.next_out=U,i.avail_out=V,i.next_in=w,i.avail_in=B,t.hold=v,t.bits=y,(t.wsize||Z!==i.avail_out&&t.mode<K&&(t.mode<et||h!==ct))&&Zt(i,i.output,i.next_out,Z-i.avail_out),lt-=i.avail_in,Z-=i.avail_out,i.total_in+=lt,i.total_out+=Z,t.total+=Z,4&t.wrap&&Z&&(i.adler=t.check=t.flags?c(t.check,T,Z,i.next_out-Z):s(t.check,T,Z,i.next_out-Z)),i.data_type=t.bits+(t.last?64:0)+(t.mode===st?128:0)+(t.mode===Pt||t.mode===Ot?256:0),(lt===0&&Z===0||h===ct)&&Q===at&&(Q=Mt),Q},inflateEnd:i=>{if(ft(i))return ot;let h=i.state;return h.window&&(h.window=null),i.state=null,at},inflateGetHeader:(i,h)=>{if(ft(i))return ot;const t=i.state;return 2&t.wrap?(t.head=h,h.done=!1,at):ot},inflateSetDictionary:(i,h)=>{const t=h.length;let x,T,w;return ft(i)?ot:(x=i.state,x.wrap!==0&&x.mode!==Tt?ot:x.mode===Tt&&(T=1,T=s(T,h,t,0),T!==x.check)?At:(w=Zt(i,h,t,t),w?(x.mode=16210,St):(x.havedict=1,at)))},inflateInfo:"pako inflate (from Nodeca project)"};const ae=(i,h)=>Object.prototype.hasOwnProperty.call(i,h);var Qt=function(i){const h=Array.prototype.slice.call(arguments,1);for(;h.length;){const t=h.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const x in t)ae(t,x)&&(i[x]=t[x])}}return i},fe=i=>{let h=0;for(let x=0,T=i.length;x<T;x++)h+=i[x].length;const t=new Uint8Array(h);for(let x=0,T=0,w=i.length;x<w;x++){let U=i[x];t.set(U,T),T+=U.length}return t};let le=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{le=!1}const Dt=new Uint8Array(256);for(let i=0;i<256;i++)Dt[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Dt[254]=Dt[254]=1;var Ee=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let h,t,x,T,w,U=i.length,B=0;for(T=0;T<U;T++)t=i.charCodeAt(T),(64512&t)==55296&&T+1<U&&(x=i.charCodeAt(T+1),(64512&x)==56320&&(t=65536+(t-55296<<10)+(x-56320),T++)),B+=t<128?1:t<2048?2:t<65536?3:4;for(h=new Uint8Array(B),w=0,T=0;w<B;T++)t=i.charCodeAt(T),(64512&t)==55296&&T+1<U&&(x=i.charCodeAt(T+1),(64512&x)==56320&&(t=65536+(t-55296<<10)+(x-56320),T++)),t<128?h[w++]=t:t<2048?(h[w++]=192|t>>>6,h[w++]=128|63&t):t<65536?(h[w++]=224|t>>>12,h[w++]=128|t>>>6&63,h[w++]=128|63&t):(h[w++]=240|t>>>18,h[w++]=128|t>>>12&63,h[w++]=128|t>>>6&63,h[w++]=128|63&t);return h},ue=(i,h)=>{const t=h||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,h));let x,T;const w=new Array(2*t);for(T=0,x=0;x<t;){let U=i[x++];if(U<128){w[T++]=U;continue}let B=Dt[U];if(B>4)w[T++]=65533,x+=B-1;else{for(U&=B===2?31:B===3?15:7;B>1&&x<t;)U=U<<6|63&i[x++],B--;B>1?w[T++]=65533:U<65536?w[T++]=U:(U-=65536,w[T++]=55296|U>>10&1023,w[T++]=56320|1023&U)}}return((U,B)=>{if(B<65534&&U.subarray&&le)return String.fromCharCode.apply(null,U.length===B?U:U.subarray(0,B));let V="";for(let v=0;v<B;v++)V+=String.fromCharCode(U[v]);return V})(w,T)},xe=(i,h)=>{(h=h||i.length)>i.length&&(h=i.length);let t=h-1;for(;t>=0&&(192&i[t])==128;)t--;return t<0||t===0?h:t+Dt[i[t]]>h?t:h},Bt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ce=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},he=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const pe=Object.prototype.toString,{Z_NO_FLUSH:C,Z_FINISH:It,Z_OK:e,Z_STREAM_END:r,Z_NEED_DICT:a,Z_STREAM_ERROR:u,Z_DATA_ERROR:g,Z_MEM_ERROR:p}=nt;function k(i){this.options=Qt({chunkSize:65536,windowBits:15,to:""},i||{});const h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(h.windowBits>=0&&h.windowBits<16)||i&&i.windowBits||(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ce,this.strm.avail_out=0;let t=bt.inflateInit2(this.strm,h.windowBits);if(t!==e)throw new Error(Bt[t]);if(this.header=new he,bt.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=Ee(h.dictionary):pe.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(t=bt.inflateSetDictionary(this.strm,h.dictionary),t!==e)))throw new Error(Bt[t])}function _(i,h){const t=new k(h);if(t.push(i),t.err)throw t.msg||Bt[t.err];return t.result}k.prototype.push=function(i,h){const t=this.strm,x=this.options.chunkSize,T=this.options.dictionary;let w,U,B;if(this.ended)return!1;for(U=h===~~h?h:h===!0?It:C,pe.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(x),t.next_out=0,t.avail_out=x),w=bt.inflate(t,U),w===a&&T&&(w=bt.inflateSetDictionary(t,T),w===e?w=bt.inflate(t,U):w===g&&(w=a));t.avail_in>0&&w===r&&t.state.wrap>0&&i[t.next_in]!==0;)bt.inflateReset(t),w=bt.inflate(t,U);switch(w){case u:case g:case a:case p:return this.onEnd(w),this.ended=!0,!1}if(B=t.avail_out,t.next_out&&(t.avail_out===0||w===r))if(this.options.to==="string"){let V=xe(t.output,t.next_out),v=t.next_out-V,y=ue(t.output,V);t.next_out=v,t.avail_out=x-v,v&&t.output.set(t.output.subarray(V,V+v),0),this.onData(y)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(w!==e||B!==0){if(w===r)return w=bt.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},k.prototype.onData=function(i){this.chunks.push(i)},k.prototype.onEnd=function(i){i===e&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fe(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var P=k,q=_,W=function(i,h){return(h=h||{}).raw=!0,_(i,h)},F=_,j=nt,ht={Inflate:P,inflate:q,inflateRaw:W,ungzip:F,constants:j};o.Inflate=P,o.constants=j,o.default=ht,o.inflate=q,o.inflateRaw=W,o.ungzip=F,Object.defineProperty(o,"__esModule",{value:!0})})})(rr,be);var nr=Qe(be);function ir(f,n){return nr.inflate(f,n?{to:"string"}:void 0)}const Ft=typeof window<"u"?window:self;function or(f,n,o){const s=(l,c)=>{f.attachListenPort(l),c&&f.attachSendPort(c),n?.(l)};f.setOnPortDisconnect(o),typeof SharedWorkerGlobalScope<"u"?Ft.addEventListener("connect",l=>s(l.source,l.source)):typeof ServiceWorkerGlobalScope<"u"?s(Ft,null):s(Ft,Ft)}const oe={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,multipleConnections:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0};oe.http=location.search.indexOf("http=1")>0;oe.http=!0;oe.http&&(oe.transport="https");const Me=oe.debug,sr=typeof window<"u"?window:self,Oe=sr,ar=Date.now()%Math.random()*1e8|0;function Te(f,n){const o=f.indexOf(n);return(o===-1?void 0:f.splice(o,1))?.[0]}const se=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,ke=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!se,ze=ke||se,fr=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),He=(f,...n)=>{try{f.postMessage(...n)}catch(o){console.error("[worker] postMessage error:",o,n)}},We=(f,...n)=>{fr().then(o=>{o.length&&o.slice(f?0:-1).forEach(s=>{He(s,...n)})})},Ge=(...f)=>{He(self,...f)},Je=()=>{};se&&We.bind(null,!1);se&&We.bind(null,!0);function lr(f,n){const o=f.findIndex(n);return o!==-1?f.splice(o,1)[0]:void 0}class ur{constructor(n){this._constructor(n)}_constructor(n){this.reuseResults=n,this.listeners={},this.listenerResults={}}addEventListener(n,o,s){var l;if(((l=this.listeners)[n]??(l[n]=[])).push({callback:o,options:s}),this.listenerResults.hasOwnProperty(n)&&(o(...this.listenerResults[n]),s?.once)){this.listeners[n].pop();return}}addMultipleEventsListeners(n){for(const o in n)this.addEventListener(o,n[o])}removeEventListener(n,o,s){this.listeners[n]&&lr(this.listeners[n],l=>l.callback===o)}invokeListenerCallback(n,o,...s){let l,c;try{l=o.callback(...s)}catch(b){c=b}if(o.options?.once&&this.removeEventListener(n,o.callback),c)throw c;return l}_dispatchEvent(n,o,...s){this.reuseResults&&(this.listenerResults[n]=s);const l=o&&[],c=this.listeners[n];return c&&c.slice().forEach(E=>{if(c.findIndex(d=>d.callback===E.callback)===-1)return;const A=this.invokeListenerCallback(n,E,...s);l&&l.push(A)}),l}dispatchResultableEvent(n,...o){return this._dispatchEvent(n,!0,...o)}dispatchEvent(n,...o){this._dispatchEvent(n,!1,...o)}cleanup(){this.listeners={},this.listenerResults={}}}const Pe={};function cr(f){return Pe[f]??(Pe[f]={type:f})}const ye=navigator?navigator.userAgent:null;navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i);navigator.userAgent.toLowerCase().indexOf("android");const hr="safari"in Ft||!!(ye&&(/\b(iPad|iPhone|iPod)\b/.test(ye)||ye.match("Safari")&&!ye.match("Chrome"))),pr=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1;const dr=Date.now();function Le(){return"["+((Date.now()-dr)/1e3).toFixed(3)+"]"}const gr=[0,1,2,4,8],vr=hr||pr,yr=!vr,Ne={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},wr=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function je(f,n=7,o=!1,s=""){let l;!Me&&!o&&(n=1),yr?s||(se?s=Ne.fg.yellow:ke&&(s=Ne.fg.cyan)):s="";const c=s;s?s=`%s ${s}%s`:s="%s";const b=function(...E){return n&4&&console.log(s,Le(),f,...E)};return wr.forEach(([E,M])=>{b[E]=function(...A){return n&M&&console[E](s,Le(),f,...A)}}),b.setPrefix=function(E){l=E,f="["+E+"]"},b.setPrefix(f),b.setLevel=function(E){n=gr.slice(0,E+1).reduce((M,A)=>M|A,0)},b.bindPrefix=function(E,M=n){return je(`${l}] [${E}`,M,o,c)},b}const mr=!0;class br extends ur{constructor(n){super(!1),this.logSuffix=n,this.onMessage=o=>{const s=o.data,l=o.source||o.currentTarget;this.processTaskMap[s.type](s,l,o)},this.processResultTask=o=>{const{taskId:s,result:l,error:c}=o.payload,b=this.awaiting[s];b&&(this.debug&&this.log.debug("done",b.taskType,l,c),"error"in o.payload?b.reject(c):b.resolve(l),delete this.awaiting[s])},this.processAckTask=o=>{const s=o.payload,l=this.awaiting[s.taskId];if(!l)return;const c=l.resolve,b={cached:s.cached,result:s.cached?"result"in s?Promise.resolve(s.result):Promise.reject(s.error):new Promise((E,M)=>{l.resolve=E,l.reject=M})};c(b),s.cached&&delete this.awaiting[s.taskId]},this.processPingTask=(o,s,l)=>{this.pushTask(this.createTask("pong",void 0),l.source)},this.processPongTask=(o,s,l)=>{const c=this.pingResolves.get(s);c&&(this.pingResolves.delete(s),c())},this.processCloseTask=(o,s,l)=>{this.detachPort(s)},this.processLockTask=(o,s,l)=>{const c=o.payload;this.requestedLocks.has(c)||(this.requestedLocks.set(c,s),navigator.locks.request(c,()=>{this.processCloseTask(void 0,s,void 0),this.requestedLocks.delete(c)}))},this.processInvokeTask=async(o,s,l)=>{const c=o.id,b=o.payload;let E,M,A;b.void||(E={taskId:c},M=this.createTask("result",E)),b.withAck&&(A=this.createTask("ack",{taskId:c,cached:!0}));let d;try{const m=this.listeners[b.type];if(!m?.length)throw new Error("no listener");const S=m[0];let O=this.invokeListenerCallback(b.type,S,b.payload,s,l);if(b.void)return;if(d=O instanceof Promise,A){const nt=!d;if(A.payload.cached=nt,nt&&(A.payload.result=O),this.pushTask(A,s),nt)return}d&&(O=await O),E.result=O}catch(m){if(this.log.error("worker task error:",m,o),b.void)return;if(A&&A.payload.cached){A.payload.error=m,this.pushTask(A,s);return}E.error=m}this.pushTask(M,s)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=je("MP"+(n?"-"+n:"")),this.debug=Me,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask}}setOnPortDisconnect(n){this.onPortDisconnect=n}attachPort(n){this.attachListenPort(n),this.attachSendPort(n)}attachListenPort(n){this.listenPorts.push(n),n.addEventListener("message",this.onMessage)}attachSendPort(n){if(this.log.warn("attaching send port"),n.start?.(),this.sendPorts.push(n),typeof window<"u"&&mr)if("locks"in navigator){const o=["lock",ar,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",o);const s=new Promise(l=>this.heldLocks.set(n,{resolve:l,id:o})).then(()=>this.heldLocks.delete(n));navigator.locks.request(o,()=>(this.resendLockTask(n),s))}else window.addEventListener("beforeunload",()=>{const o=this.createTask("close",void 0);this.postMessage(void 0,o)});this.releasePending()}resendLockTask(n){const o=this.heldLocks.get(n);o&&this.pushTask(this.createTask("lock",o.id),n)}detachPort(n){this.log.warn("disconnecting port"),Te(this.listenPorts,n),Te(this.sendPorts,n),n.removeEventListener?.("message",this.onMessage),n.close?.(),this.onPortDisconnect?.(n),this.heldLocks.get(n)?.resolve();const s=cr("PORT_DISCONNECTED");for(const l in this.awaiting){const c=this.awaiting[l];c.port===n&&(c.reject(s),delete this.awaiting[l])}}postMessage(n,o){(Array.isArray(n)?n:n?[n]:this.sendPorts).forEach(l=>{l.postMessage(o,o.transfer)})}releasePending(){this.releasingPending||(this.releasingPending=!0,this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((n,o)=>{const s=n,l=o?[o]:this.sendPorts;l.length&&(s.forEach(c=>{try{this.postMessage(l,c)}catch(b){this.log.error("postMessage error:",b,c,l)}}),this.pending.delete(o))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(n,o,s){return{type:n,payload:o,id:this.taskId++,transfer:s}}createInvokeTask(n,o,s,l,c){return this.createTask("invoke",{type:n,payload:o,withAck:s,void:l},c)}pushTask(n,o){let s=this.pending.get(o);s||this.pending.set(o,s=[]),s.push(n),this.releasePending()}invokeVoid(n,o,s,l){const c=this.createInvokeTask(n,o,void 0,!0,l);this.pushTask(c,s)}invoke(n,o,s,l,c){this.debug&&this.log.debug("start",n,o);let b;const E=new Promise((M,A)=>{b=this.createInvokeTask(n,o,s,void 0,c),this.awaiting[b.id]={resolve:M,reject:A,taskType:n,port:l},this.pushTask(b,l)});if(ze){E.finally(()=>{clearInterval(M)});const M=Ft.setInterval(()=>{this.log.error("task still has no result",b,l)},6e4)}return E}invokeExceptSource(n,o,s){const l=this.sendPorts.slice();Te(l,s),l.forEach(c=>{this.invokeVoid(n,o,c)})}}class kr extends br{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:n,args:o,transfer:s}){const l={method:n,args:o},c=this.listeners.invoke;if(c?.length){let E=c[0].callback(l);return!ze&&!(E instanceof Promise)&&(E=Promise.resolve(E)),E}const b=n==="aes-encrypt"||n==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",l,void 0,this.sendPorts[b],s)}invokeCrypto(n,...o){return this.invokeCryptoNew({method:n,args:o})}}const it=new kr;Oe&&(Oe.cryptoMessagePort=it);function _r(f){const n=f.length,o=n*8;let s=Y(f[0]).and(127).shiftLeft(o-8);for(let l=1;l<n;++l){const c=o-(l+1)*8,b=Y(f[l]);s=s.or(c?b.shiftLeft(c):b)}return s}const Ce=["1f609","1f60d","1f61b","1f62d","1f631","1f621","1f60e","1f634","1f635","1f608","1f62c","1f607","1f60f","1f46e","1f477","1f482","1f476","1f468","1f469","1f474","1f475","1f63b","1f63d","1f640","1f47a","1f648","1f649","1f64a","1f480","1f47d","1f4a9","1f525","1f4a5","1f4a4","1f442","1f440","1f443","1f445","1f444","1f44d","1f44e","1f44c","1f44a","270c","270b","1f450","1f446","1f447","1f449","1f448","1f64f","1f44f","1f4aa","1f6b6","1f3c3","1f483","1f46b","1f46a","1f46c","1f46d","1f485","1f3a9","1f451","1f452","1f45f","1f45e","1f460","1f455","1f457","1f456","1f459","1f45c","1f453","1f380","1f484","1f49b","1f499","1f49c","1f49a","1f48d","1f48e","1f436","1f43a","1f431","1f42d","1f439","1f430","1f438","1f42f","1f428","1f43b","1f437","1f42e","1f417","1f434","1f411","1f418","1f43c","1f427","1f425","1f414","1f40d","1f422","1f41b","1f41d","1f41c","1f41e","1f40c","1f419","1f41a","1f41f","1f42c","1f40b","1f410","1f40a","1f42b","1f340","1f339","1f33b","1f341","1f33e","1f344","1f335","1f334","1f333","1f31e","1f31a","1f319","1f30e","1f30b","26a1","2614","2744","26c4","1f300","1f308","1f30a","1f393","1f386","1f383","1f47b","1f385","1f384","1f381","1f388","1f52e","1f3a5","1f4f7","1f4bf","1f4bb","260e","1f4e1","1f4fa","1f4fb","1f509","1f514","23f3","23f0","231a","1f512","1f511","1f50e","1f4a1","1f526","1f50c","1f50b","1f6bf","1f6bd","1f527","1f528","1f6aa","1f6ac","1f4a3","1f52b","1f52a","1f48a","1f489","1f4b0","1f4b5","1f4b3","2709","1f4eb","1f4e6","1f4c5","1f4c1","2702","1f4cc","1f4ce","2712","270f","1f4d0","1f4da","1f52c","1f52d","1f3a8","1f3ac","1f3a4","1f3a7","1f3b5","1f3b9","1f3bb","1f3ba","1f3b8","1f47e","1f3ae","1f0cf","1f3b2","1f3af","1f3c8","1f3c0","26bd","26be","1f3be","1f3b1","1f3c9","1f3b3","1f3c1","1f3c7","1f3c6","1f3ca","1f3c4","2615","1f37c","1f37a","1f377","1f374","1f355","1f354","1f35f","1f357","1f371","1f35a","1f35c","1f361","1f373","1f35e","1f369","1f366","1f382","1f370","1f36a","1f36b","1f36d","1f36f","1f34e","1f34f","1f34a","1f34b","1f352","1f347","1f349","1f353","1f351","1f34c","1f350","1f34d","1f346","1f345","1f33d","1f3e1","1f3e5","1f3e6","26ea","1f3f0","26fa","1f3ed","1f5fb","1f5fd","1f3a0","1f3a1","26f2","1f3a2","1f6a2","1f6a4","2693","1f680","2708","1f681","1f682","1f68b","1f68e","1f68c","1f699","1f697","1f695","1f69b","1f6a8","1f694","1f692","1f691","1f6b2","1f6a0","1f69c","1f6a6","26a0","1f6a7","26fd","1f3b0","1f5ff","1f3aa","1f3ad","1f1ef-1f1f5","1f1f0-1f1f7","1f1e9-1f1ea","1f1e8-1f1f3","1f1fa-1f1f8","1f1eb-1f1f7","1f1ea-1f1f8","1f1ee-1f1f9","1f1f7-1f1fa","1f1ec-1f1e7","0031-20e3","0032-20e3","0033-20e3","0034-20e3","0035-20e3","0036-20e3","0037-20e3","0038-20e3","0039-20e3","0030-20e3","1f51f","2757","2753","2665","2666","1f4af","1f517","1f531","1f534","1f535","1f536","1f537"];async function Ar(f,n){const o=f.concat(n),s=await it.invokeCrypto("sha256",o),l=[],c=Ce.length,b=8;for(let E=0;E!=s.length;E+=b){const M=s.slice(E,E+b),d=_r(M).mod(c).toJSNumber(),m=Ce[d];l.push(m)}return l}async function Sr(f,n,o){const s=await it.invokeCrypto("mod-pow",f,n,o),c=(await it.invokeCrypto("sha1",s)).slice(-8).reverse(),b=er(vt(c)).toString(10);return{key:s,key_fingerprint:b}}function Ve(f){if(crypto&&"getRandomValues"in crypto)crypto.getRandomValues(f);else throw new Error("NO_SECURE_RANDOM");return f}function _e(f,n=16,o,s=!1,l=!1){const c=f.byteLength||f.length,b=s?n-c:n-c%n;if(b>0&&b<n){const E=new Uint8Array(b);if(o)for(let M=0;M<b;++M)E[M]=0;else Ve(E);return f instanceof ArrayBuffer?(l?kt(E,f):kt(f,E)).buffer:f instanceof Uint8Array?l?kt(E,f):kt(f,E):l?[...E].concat(f):f.concat([...E])}return f}function Re(f){const n=f.length,o=new Uint8Array(Math.ceil(n/2));let s=0;n%2&&(o[s++]=parseInt(f.charAt(0),16));for(let l=s;l<n;l+=2)o[s++]=parseInt(f.substr(l,2),16);return o}async function Er(f){const{p:n,g:o}=f,l=(A=>{for(;;){const d=Ve(new Uint8Array(A.length)),m=vt(d);if(!m.greater(Y.one))continue;const S=vt(A);if(m.lesser(S.subtract(Y.one)))return d}})(n),c=Re(o.toString(16)),b=_e(await it.invokeCrypto("mod-pow",c,l,n),256,!0,!0,!0),E=await it.invokeCrypto("sha256",b);return{a:l,g_a:b,g_a_hash:E,p:n}}function xr(f,n){const o=f.length,s=new Uint8Array(o);for(let l=0;l<o;++l)s[l]=f[l]^n[l];return s}function Ae(f){return f instanceof Uint8Array?f:typeof f=="string"?new TextEncoder().encode(f):new Uint8Array(f)}function Tr(f){const n=f.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=(f[s]<16?"0":"")+(f[s]||0).toString(16);return o.join("")}async function Pr(f,n,o){let s=await it.invokeCrypto("sha256",kt(n,new TextEncoder().encode(f),n));s=kt(o,s,o),s=await it.invokeCrypto("sha256",s);let l=await it.invokeCrypto("pbkdf2",new Uint8Array(s),n,1e5);return l=kt(o,l,o),s=await it.invokeCrypto("sha256",l),s}async function Br(f,n,o){const s=o?n.new_algo:n.current_algo,l=vt(s.p),c=Y(s.g),b=await Pr(f,s.salt1,s.salt2),E=Y(Tr(b),16),M=function(et,K){return et instanceof Uint8Array||(et=Ae(et)),_e(et,K,!0,!0,!0)},A=c.modPow(E,l),d=et=>{const K=new Uint8Array(et.length);for(let tt=0;tt<et.length;tt+=4)K[tt]=et[tt+3],K[tt+1]=et[tt+2],K[tt+2]=et[tt+1],K[tt+3]=et[tt];return K};if(o){const et=Rt(A);return M(et,256)}const m=vt(n.srp_B),S=M(Rt(l),256),O=M(Rt(c),256),nt=M(Rt(m),256),ct=await it.invokeCrypto("sha256",kt(S,O)),yt=vt(ct).multiply(A).mod(l),at=(et,K)=>{const tt=K.subtract(et),dt=2048-64,ft=256;return!(tt.isNegative()||tt.bitLength().toJSNumber()<dt||et.bitLength().toJSNumber()<dt||Math.floor((et.bitLength().toJSNumber()+7)/8)>ft)},zt=async()=>{for(;;){const et=vt(d(n.secure_random)),K=c.modPow(et,l);if(at(K,l)){const tt=Rt(K),dt=await it.invokeCrypto("sha256",kt(tt,nt)),ft=vt(dt);if(!ft.isZero()&&!ft.isNegative())return{a:et,a_for_hash:tt,u:ft}}}},{a:xt,a_for_hash:ot,u:At}=await zt();let St;m.greater(yt)?St=m:St=m.add(l),St=St.subtract(yt).mod(l);const Mt=At.multiply(E),Ut=xt.add(Mt),wt=St.modPow(Ut,l),Tt=await it.invokeCrypto("sha256",M(Rt(wt),256));let st=await it.invokeCrypto("sha256",S);const Nt=await it.invokeCrypto("sha256",O);st=xr(st,Nt);const Ot=kt(st,await it.invokeCrypto("sha256",s.salt1),await it.invokeCrypto("sha256",s.salt2),ot,nt,Tt),Pt=await it.invokeCrypto("sha256",Ot);return{_:"inputCheckPasswordSRP",srp_id:n.srp_id,A:new Uint8Array(ot),M1:Pt}}var gt=new Uint8Array(256),te=new Uint8Array(256),ee=new Uint32Array(256),re=new Uint32Array(256),ne=new Uint32Array(256),ie=new Uint32Array(256),Jt=new Uint32Array(256),jt=new Uint32Array(256),Vt=new Uint32Array(256),Xt=new Uint32Array(256);function Ir(){for(var f=new Uint8Array(256),n=new Uint8Array(256),o,s,l,c,b,E,M=0,A=0,d=0;d<256;d++)f[d]=d<<1^(d>>7)*283,n[f[d]^d]=d;for(;!gt[M];M^=o||1)c=A^A<<1^A<<2^A<<3^A<<4,c=c>>8^c&255^99,gt[M]=c,te[c]=M,l=f[s=f[o=f[M]]],E=l*16843009^s*65537^o*257^M*16843008,b=f[c]*257^c*16843008,ee[M]=b=b<<24^b>>>8,re[M]=b=b<<24^b>>>8,ne[M]=b=b<<24^b>>>8,ie[M]=b=b<<24^b>>>8,Jt[c]=E=E<<24^E>>>8,jt[c]=E=E<<24^E>>>8,Vt[c]=E=E<<24^E>>>8,Xt[c]=E=E<<24^E>>>8,A=n[A]||1}function Rr(f,n){return f.charCodeAt(n)<<24^f.charCodeAt(n+1)<<16^f.charCodeAt(n+2)<<8^f.charCodeAt(n+3)}function Kt(f){if(f instanceof Uint32Array)return f;if(typeof f=="string"){if(f.length%4!==0)for(var n=f.length%4;n<=4;n++)f+="\0x00";for(var o=new Uint32Array(f.length/4),n=0;n<f.length;n+=4)o[n/4]=Rr(f,n);return o}if(f instanceof Uint8Array){for(var o=new Uint32Array(f.length/4),n=0;n<f.length;n+=4)o[n/4]=f[n]<<24^f[n+1]<<16^f[n+2]<<8^f[n+3];return o}throw new Error("Unable to create 32-bit words")}function we(f,n,o){o===void 0&&(o=f);for(var s=0;s<f.length;s++)o[s]=f[s]^n[s]}Ir();var Mr=function(){function f(n){var o=Kt(n);if(o.length!==4&&o.length!==6&&o.length!==8)throw new Error("Invalid key size");this.encKey=new Uint32Array(4*o.length+28),this.decKey=new Uint32Array(4*o.length+28),this.encKey.set(o);for(var s=1,l=o.length,c;l<4*o.length+28;l++)c=this.encKey[l-1],(l%o.length===0||o.length===8&&l%o.length===4)&&(c=gt[c>>>24]<<24^gt[c>>16&255]<<16^gt[c>>8&255]<<8^gt[c&255],l%o.length===0&&(c=c<<8^c>>>24^s<<24,s=s<<1^(s>>7)*283)),this.encKey[l]=this.encKey[l-o.length]^c;for(var b=0;l;b++,l--)c=this.encKey[b&3?l:l-4],l<=4||b<4?this.decKey[b]=c:this.decKey[b]=Jt[gt[c>>>24]]^jt[gt[c>>16&255]]^Vt[gt[c>>8&255]]^Xt[gt[c&255]]}return f.prototype.encrypt=function(n){for(var o=Kt(n),s=new Uint32Array(4),l=o[0]^this.encKey[0],c=o[1]^this.encKey[1],b=o[2]^this.encKey[2],E=o[3]^this.encKey[3],M=this.encKey.length/4-2,A=4,d,m,S,O=0;O<M;O++)d=ee[l>>>24]^re[c>>16&255]^ne[b>>8&255]^ie[E&255]^this.encKey[A],m=ee[c>>>24]^re[b>>16&255]^ne[E>>8&255]^ie[l&255]^this.encKey[A+1],S=ee[b>>>24]^re[E>>16&255]^ne[l>>8&255]^ie[c&255]^this.encKey[A+2],E=ee[E>>>24]^re[l>>16&255]^ne[c>>8&255]^ie[b&255]^this.encKey[A+3],l=d,c=m,b=S,A+=4;for(var O=0;O<4;O++)s[O]=gt[l>>>24]<<24^gt[c>>16&255]<<16^gt[b>>8&255]<<8^gt[E&255]^this.encKey[A++],d=l,l=c,c=b,b=E,E=d;return s},f.prototype.decrypt=function(n){for(var o=Kt(n),s=new Uint32Array(4),l=o[0]^this.decKey[0],c=o[3]^this.decKey[1],b=o[2]^this.decKey[2],E=o[1]^this.decKey[3],M=this.decKey.length/4-2,A,d,m,S=4,O=0;O<M;O++)A=Jt[l>>>24]^jt[c>>16&255]^Vt[b>>8&255]^Xt[E&255]^this.decKey[S],d=Jt[c>>>24]^jt[b>>16&255]^Vt[E>>8&255]^Xt[l&255]^this.decKey[S+1],m=Jt[b>>>24]^jt[E>>16&255]^Vt[l>>8&255]^Xt[c&255]^this.decKey[S+2],E=Jt[E>>>24]^jt[l>>16&255]^Vt[c>>8&255]^Xt[b&255]^this.decKey[S+3],l=A,c=d,b=m,S+=4;for(var O=0;O<4;O++)s[3&-O]=te[l>>>24]<<24^te[c>>16&255]<<16^te[b>>8&255]<<8^te[E&255]^this.decKey[S++],A=l,l=c,c=b,b=E,E=A;return s},f}(),Ur=function(){function f(n,o,s){s===void 0&&(s=16),this.key=Kt(n),this.iv=Kt(o),this.cipher=new Mr(n),this.blockSize=s/4}return f.prototype.encrypt=function(n,o){for(var s=Kt(n),l=o||new Uint32Array(s.length),c=this.iv.subarray(this.blockSize,this.iv.length),b=this.iv.subarray(0,this.blockSize),E=new Uint32Array(this.blockSize),M=0;M<s.length;M+=this.blockSize){var A=s.subarray(M,M+this.blockSize);we(A,b,E);var d=this.cipher.encrypt(E);we(d,c),c=A,b=d;for(var m=M,S=0;m<s.length&&S<4;m++,S++)l[m]=d[S]}return l},f.prototype.decrypt=function(n,o){for(var s=Kt(n),l=o||new Uint32Array(s.length),c=this.iv.subarray(this.blockSize,this.iv.length),b=this.iv.subarray(0,this.blockSize),E=new Uint32Array(this.blockSize),M=0;M<l.length;M+=this.blockSize){var A=s.subarray(M,M+this.blockSize);we(A,c,E);var d=this.cipher.decrypt(E);we(d,b),b=A,c=d;for(var m=M,S=0;m<l.length&&S<4;m++,S++)l[m]=d[S]}return l},f}();function Or(f){const n=new Uint8Array(f.byteLength);for(let o=0,s=f.length*4;o<s;++o)n[o]=f[o>>>2]>>>24-o%4*8&255;return n}function Be(f){const n=Ae(f),o=[];for(let s=0,l=n.length;s<l;++s)o[s>>>2]|=n[s]<<24-s%4*8;return new Uint32Array(o)}function Xe(f,n,o,s=!0){const c=new Ur(Be(n),Be(o))[s?"encrypt":"decrypt"](Be(f));return Or(c)}function Lr(f,n,o){return Xe(_e(f),n,o,!0)}function Nr(f,n,o){return Xe(f,n,o,!1)}const Cr={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function qr(f){const n=Cr[f];return crypto.getRandomValues(n),n[0]}function qe(f,n){return Y.randBetween(f,n,()=>qr(32)/4294967295)}function Ze(f){const n=Y[2];if(f.remainder(n).isZero())return n;const o=Y(1e3);let s,l,c,b,E,M,A;do s=qe(Y.one,f.minus(1));while(s.isZero()||s.eq(f.minus(n)));c=qe(Y.one,f.minus(1)),E=Y.one,M=Y.one;const m=Y("FFFFFFFFFFFFFFFF",16).minus(f).plus(1),S=O=>(O=O.pow(n).mod(f),O=O.add(s),O.lesser(s)&&(O=O.add(m)),O=O.mod(f),O);do{l=c;for(let nt=0;Y(nt).lesser(E);++nt)c=S(c);let O=Y.zero;do{b=c;const nt=Y.min(o,E.minus(O));for(let ct=0;Y(ct).lesser(nt);++ct)c=S(c),M=M.multiply(l.greater(c)?l.minus(c):c.minus(l)).mod(f);A=Y.gcd(M,f),O=O.add(o)}while(O.lesser(E)&&A.eq(Y.one));E=E.shiftLeft(Y.one)}while(A.eq(Y.one));if(A.eq(f))do b=S(b),A=Y.gcd(l.minus(b).abs(),f);while(A.eq(Y.one));return A}function Zr(f){const n=vt(f),o=[],s=[];let l=Ze(n);o.push(n.divide(l)),o.push(l);do{const c=o.pop();if(!c.eq(Y.one))if(c.isPrime(!0)){s.push(c);for(let b=0;b<o.length;++b){let E=o[b];if(E.mod(c).isZero()){do E=E.divide(c);while(E.mod(c).isZero());o[b]=E}}}else l=Ze(c),o.push(c.divide(l)),o.push(l)}while(o.length);return s}function Dr(f){let n=Zr(f);n.sort((l,c)=>l.compare(c)),n.length>2&&(n=[n.splice(n.length-2,1)[0],n.reduce((l,c)=>l.multiply(c),Y.one)]);const o=n[0],s=n[n.length-1];return(o.lesser(s)?[o,s]:[s,o]).map(l=>Rt(l))}const Yt=typeof window<"u"&&"crypto"in window?window.crypto.subtle:self.crypto.subtle;async function Fr(f,n,o){const s=await Yt.importKey("raw",f,{name:"PBKDF2"},!1,["deriveBits"]);return Yt.deriveBits({name:"PBKDF2",salt:n,iterations:o,hash:{name:"SHA-512"}},s,512).then(c=>new Uint8Array(c))}function Kr(f,n){return Ke(f,Re(n.exponent),Re(n.modulus))}function zr(f){return Yt.digest("SHA-1",Ae(f)).then(n=>new Uint8Array(n))}function Hr(f){return Yt.digest("SHA-256",Ae(f)).then(n=>new Uint8Array(n))}const me=16;class De{constructor(n,o,s){this.mode=n,this.cryptoKey=o,this.queue=[],this.counter=vt(s)}async update(n){return new Promise(o=>{this.queue.push({data:n,resolve:o}),this.release()})}async release(){if(!this.releasing){for(this.releasing=!0;this.queue.length;){const{data:n,resolve:o}=this.queue.shift();o(await this._update(n))}this.releasing=!1}}async perform(n){return await Yt[this.mode]({name:"AES-CTR",counter:_e(Rt(this.counter),me,!0,!0,!0),length:128},this.cryptoKey,n)}async _update(n){let o=n,s;if(this.leftLength){const A=this.leftLength,d=me-A,m=new Uint8Array(A).concat(o.slice(0,d)),S=await this.perform(m);s=new Uint8Array(S.slice(A)),o=o.slice(d),this.counter=this.counter.add(1)}const l=new Uint8Array(await this.perform(o)),c=s?s.concat(l):l;let b=o.length;const E=b%me;b-=E;const M=b/me;return this.counter=this.counter.add(M),this.leftLength=E||void 0,c}}const Ue=new Map;let Wr=-1;async function Gr({encKey:f,encIv:n,decKey:o,decIv:s}){const l=++Wr,b=[["encrypt",f],["decrypt",o]].map(([S,O])=>Yt.importKey("raw",O,{name:"AES-CTR"},!1,[S])),[E,M]=await Promise.all(b),A=new De("encrypt",E,n.slice()),d=new De("decrypt",M,s.slice()),m={enc:A,dec:d};return Ue.set(l,m),l}async function Jr({id:f,data:n,operation:o}){const s=Ue.get(f);return await(o==="encrypt"?s.enc:s.dec).update(n)}function jr(f){Ue.delete(f)}console.log("CryptoWorker start");const Vr={sha1:zr,sha256:Hr,pbkdf2:Fr,"aes-encrypt":Lr,"aes-decrypt":Nr,"rsa-encrypt":Kr,factorize:Dr,"mod-pow":Ke,gzipUncompress:ir,computeSRP:Br,"generate-dh":Er,"compute-dh-key":Sr,"get-emojis-fingerprint":Ar,"aes-ctr-prepare":Gr,"aes-ctr-process":Jr,"aes-ctr-destroy":jr};it.addMultipleEventsListeners({invoke:({method:f,args:n})=>Vr[f](...n),terminate:()=>{Ft.close()}});typeof MessageChannel<"u"&&or(it,f=>{const n=new MessageChannel;it.attachPort(n.port1),it.invokeVoid("port",void 0,f,[n.port2])});
//# sourceMappingURL=crypto.worker-9d5beacd.js.map
